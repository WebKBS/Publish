@{
    ViewData["title"] = "AIRDROP";
}

<div class="top_title_wrap">
    <div class="inner">
        <h2 class="subtitle_1 suit_m">AIRDROP</h2>
        <p class="sub_title body_2 suit_r color_white_2">AIR DROPPER is optimized for ‘Chrome’ web browser and does not support mobile service.</p>
    </div>
</div>

<section class="cont airdrop">
    <div class="inner">
        <h2 class="subtitle_3 suit_m">Enter Info</h2>
        <div class="select_box">
            <div class="box">
                <h3 class="body_2 suit_m color_white_2">Blockchain Network</h3>
                <div class="select_list">
                    <!-- on 추가시 style 변경 -->
                    <div class="select_wrap default">
                        <button type="button" id="selectChain">
                            <img src="" />
                            <span class="select">Select blockchain network</span>
                        </button>
                    </div>
                    <!-- on 추가시 display -->
                    <ul class="chain_list">
                        <li>
                            <button type="button">
                                <img src="~/images/coin_icon/ethereum.svg" alt="ethereum" />
                                <span class="select">Ethereum</span>
                            </button>
                        </li>
                        <li>
                            <button type="button">
                                <img src="~/images/coin_icon/polygon.svg" alt="polygon" />
                                <span class="select">Polygon</span>
                            </button>
                        </li>
                        <li>
                            <button type="button">
                                <img src="~/images/coin_icon/bsc.svg" alt="bsc" />
                                <span class="select">Bsc</span>
                            </button>
                        </li>
                        <li>
                            <button type="button">
                                <img src="~/images/coin_icon/klaytn.svg" alt="klaytn" />
                                <span class="select">Klaytn</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="box">
                <h3 class="body_2 suit_m color_white_2">Token Format</h3>
                <div class="select_list">
                    <!-- default 클래스 삭제시 흰색 색상 -->
                    <div class="select_wrap default">
                        <button type="button" id="selectToken">
                            <span class="select">Select the token format</span>
                        </button>
                    </div>
                    <ul class="token_list">
                        <li>
                            <button type="button">
                                <span class="select">ERC-20</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="input_box">
            <h3 class="body_2 suit_m color_white_2">Smart Contract</h3>
            <div class="box">
                <input type="text" placeholder="Enter the Smart contract address" />
                <button type="button" class="button_112" data-comming>Apply</button>
            </div>
        </div>
        <div class="token_box">
            <div class="box">
                <h3 class="body_2 suit_m color_white_2">Token Name</h3>
                <input type="text" readonly aria-label="Token name" />
            </div>
            <div class="box">
                <h3 class="body_2 suit_m color_white_2">Token Ticker</h3>
                <input type="text" readonly aria-label="Token ticker" />
            </div>
        </div>
        <div class="upload_wrap">
            <h3 class="body_2 suit_m color_white_2">File Upload</h3>
            <div class="box">
                <p class="body_2 suit_r color_white_2">
                    * Depending on the token format you set up,
                    the upload form will be different.
                </p>
                <div class="button_wrap">
                    <!-- disabled 제거, on클래스 추가시 색상 변경 -->
                    <a href="#" download="" class="button_112 on" data-comming>Download form</a>
                    <button id="check_upload_btn" type="button" class="button_112" disabled>Confirm Upload</button>
                </div>
            </div>
            <div class="box">
                <div class="upload_box">
                    <input id="upload" type="file" hidden accept=".csv" multiple />
                    <!-- on, error 클래스 추가시 스타일 변경 -->
                    <label for="upload" class="upload_label">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.12216 3.22581C7.12216 2.15687 7.98617 1.29032 9.05198 1.29032H28.3499V9.03228C28.3499 9.38859 28.6379 9.67744 28.9932 9.67744H36.7128V36.7742C36.7128 37.8431 35.8488 38.7097 34.783 38.7097H9.05198C7.98617 38.7097 7.12216 37.8431 7.12216 36.7742V30.9667H20.6312C22.0523 30.9667 23.2043 29.8113 23.2043 28.3861V11.6119C23.2043 10.1866 22.0523 9.03125 20.6312 9.03125H7.12216V3.22581ZM29.26 0H28.9931H9.05198C7.27563 0 5.83561 1.44424 5.83561 3.22581V9.03125H3.90611C2.48502 9.03125 1.33301 10.1866 1.33301 11.6119V28.3861C1.33301 29.8113 2.48502 30.9667 3.90611 30.9667H5.83561V36.7742C5.83561 38.5558 7.27563 40 9.05198 40H34.783C36.5593 40 37.9993 38.5558 37.9993 36.7742V8.76502L29.26 0ZM29.6365 2.20274V8.38712H35.8028L29.6365 2.20274ZM14.5841 12.9036H18.0578L14.0054 20L18.0583 27.0972H14.5846L12.2686 23.0415L9.95252 27.0972H6.47884L10.5317 20L6.47933 12.9036H9.95301L12.2686 16.9585L14.5841 12.9036Z" fill="#747474" />
                            <path d="M28.106 23.7432C27.6219 23.7432 27.1826 23.654 26.7881 23.4757C26.3935 23.2941 26.0802 23.0331 25.8481 22.6926C25.616 22.3489 25.5 21.9339 25.5 21.4475C25.5 21.0195 25.5862 20.6725 25.7586 20.4066C25.931 20.1375 26.1614 19.9267 26.4499 19.7743C26.7383 19.6219 27.0566 19.5084 27.4048 19.4339C27.7562 19.356 28.1093 19.2944 28.4641 19.249C28.9282 19.1907 29.3046 19.1469 29.593 19.1177C29.8848 19.0853 30.097 19.0318 30.2296 18.9572C30.3655 18.8826 30.4335 18.7529 30.4335 18.5681V18.5292C30.4335 18.0493 30.2992 17.6764 30.0306 17.4105C29.7654 17.1446 29.3626 17.0117 28.8221 17.0117C28.2618 17.0117 27.8225 17.1316 27.5042 17.3716C27.1859 17.6115 26.9621 17.8677 26.8328 18.1401L25.7188 17.751C25.9178 17.297 26.183 16.9436 26.5145 16.6907C26.8494 16.4345 27.2141 16.2562 27.6087 16.1556C28.0065 16.0519 28.3978 16 28.7824 16C29.0277 16 29.3095 16.0292 29.6278 16.0875C29.9494 16.1427 30.2594 16.2578 30.5578 16.4329C30.8595 16.608 31.1098 16.8722 31.3088 17.2257C31.5077 17.5791 31.6072 18.0525 31.6072 18.6459V23.5681H30.4335V22.5564H30.3738C30.2942 22.7185 30.1616 22.892 29.9759 23.0768C29.7903 23.2617 29.5433 23.4189 29.2349 23.5486C28.9266 23.6783 28.5503 23.7432 28.106 23.7432ZM28.285 22.7121C28.7492 22.7121 29.1404 22.6229 29.4587 22.4446C29.7803 22.2662 30.0224 22.036 30.1848 21.7539C30.3506 21.4718 30.4335 21.1751 30.4335 20.8638V19.8132C30.3837 19.8716 30.2743 19.9251 30.1052 19.9737C29.9395 20.0191 29.7472 20.0597 29.5283 20.0953C29.3128 20.1278 29.1023 20.1569 28.8967 20.1829C28.6945 20.2056 28.5304 20.225 28.4044 20.2412C28.0994 20.2802 27.8142 20.3434 27.549 20.4309C27.2871 20.5152 27.0749 20.6433 26.9124 20.8152C26.7533 20.9838 26.6737 21.214 26.6737 21.5058C26.6737 21.9047 26.8245 22.2062 27.1263 22.4105C27.4313 22.6115 27.8175 22.7121 28.285 22.7121Z" fill="#747474" />
                            <path d="M34.5 22.2062L34.4204 22.7315C34.3641 23.1012 34.2779 23.4968 34.1618 23.9183C34.0491 24.3398 33.9314 24.737 33.8087 25.1099C33.686 25.4828 33.5849 25.7795 33.5053 26H32.6102C32.6533 25.7925 32.7096 25.5185 32.7792 25.178C32.8489 24.8375 32.9185 24.4566 32.9881 24.035C33.0611 23.6167 33.1207 23.1887 33.1672 22.751L33.2268 22.2062H34.5Z" fill="#747474" />
                        </svg>

                        <span id="file_name">File Upload</span>
                        <span id="file_msg">Select CSV file (.csv) or drag and drop</span>
                    </label>
                </div>
            </div>
            <div class="text_wrap body_2 suit_r color_white_2">
                <p><span>*</span>The file should be a list of only wallet addresses and the amount of tokens to be transferred. (File format: *.CSV)</p>
                <p>
                    <span>*</span>In the case of NFT, ERC-721 (BEP-721/KIP-17) requires one address per token, and you must enter the token ID, not the amount of tokens.<br />
                    (Example: If you send 3 NFTs to 1 address, enter each token ID in 3 rows with the same address)
                </p>
                <p>
                    <span>*</span>ERC-1155 (BEP-1155/KIP-37) requires one address per token ID, and address / token ID / amount of tokens must be entered.
                </p>
                <p class="color_theme"><span>*</span>Modification of the list is possible only through uploading the modified file.</p>
                <p><span>*</span>For details, refer to the ‘Guide’</p>
            </div>
        </div>
        <div class="button_wrap">
            <button type="button" class="button_160 payment_btn" disabled>NEXT</button>
        </div>
    </div>
</section>

<select hidden>
    <option value="Ethereum">Ethereum</option>
    <option value="Polygon">Polygon</option>
    <option value="BSC">BSC</option>
    <option value="Klaytn">Klaytn</option>
</select>
<select hidden>
    <option>ERC-20</option>
</select>

<script>
    const chainSelectBtn = document.getElementById('selectChain');
    const tokenSelectBtn = document.getElementById('selectToken');


    chainSelectBtn.addEventListener('click', (e) => {
        e.preventDefault();
        openMenu(e);

    });
    tokenSelectBtn.addEventListener('click', (e) => {
        e.preventDefault();
        openMenu(e);
    });

    const removeClassSelectList = () => {
        document.querySelectorAll('.select_list > ul').forEach(ev => {
            ev.classList.remove('on');
        })
    }

    // select 열기
    const openMenu = (event) => {
        const target = event.currentTarget;
        const nextElement = target.parentElement.nextElementSibling;

        removeClassSelectList();

        nextElement.classList.add('on');
    }

    // select 닫기
    document.body.addEventListener('click', (e) => {
        const target = e.target
        const isSelect = target.classList.contains('select_list') || target.closest('.select_list');

        if (isSelect) return;
        removeClassSelectList();
    })

    document.querySelectorAll('.chain_list li button').forEach(ev => {
        ev.addEventListener('click', (e) => {
            removeClassSelectList();
            chainSelectBtn.parentElement.classList.add('on');
            chainSelectBtn.querySelector('img').src = ev.children[0].src;
            chainSelectBtn.querySelector('.select').textContent = ev.children[1].textContent;
        })
    })

    document.querySelectorAll('.token_list li button').forEach(ev => {
        ev.addEventListener('click', (e) => {
            removeClassSelectList();
            tokenSelectBtn.parentElement.classList.add('on');
            tokenSelectBtn.querySelector('.select').textContent = ev.children[0].textContent;
        })
    })



</script>



<script>
    // 파일 업로드
    const fileSelector = document.getElementById('upload');
    const uploadLabel = document.querySelector('.upload_label');
    const fileName = document.getElementById('file_name');
    const fileMsg = document.getElementById('file_msg');
    const checkUploadBtn = document.getElementById('check_upload_btn');

    const fileExtention = ["text/csv"];

    const fileHandler = (fileList, target) => {
        if (fileList[0].type === fileExtention[0]) {
            fileName.textContent = fileList[0].name;
            fileMsg.textContent = "File upload completed"
            uploadLabel.classList.add('on');
            checkUploadBtn.disabled = false;
            checkUploadBtn.classList.add('on');
        } else {
            errorMsg();
        }

    }

    checkUploadBtn.addEventListener('click', () => {
        document.querySelector('.airdrop_modal').classList.add('on');
    })

    const errorMsg = () => {
        uploadLabel.classList.remove('on');
        uploadLabel.classList.add('error');
        fileName.textContent = 'Invalid file.'
        fileMsg.textContent = "Please re-upload."
        fileSelector.value = "";
    }

    fileSelector.addEventListener('change', (event) => {
        const fileList = event.target.files;
        fileHandler(fileList, event.target);
    })


    uploadLabel.addEventListener('dragover', (event) => {
        event.stopPropagation();
        event.preventDefault();
        uploadLabel.classList.add('move');
        event.dataTransfer.dropEffect = 'copy';

    });

    uploadLabel.addEventListener('dragleave', (event) => {
        event.stopPropagation();
        event.preventDefault();
        uploadLabel.classList.remove('move');
    });

    uploadLabel.addEventListener('drop', (event) => {
        event.stopPropagation();
        event.preventDefault();
        uploadLabel.classList.remove('move');
        const fileList = event.dataTransfer?.files;
        const data = new DataTransfer();
        data.items.add(fileList[0]);

        if (data.files[0].type === fileExtention[0]) {
            fileSelector.files = data.files;
            fileHandler(fileList, event.target);
        } else {
            data.items.clear();
            errorMsg();
        }
    });


</script>


@section Modals{
    <!-- on 추가시 display -->
    <div class="modal airdrop_modal">
        <div class="inner">
            <h2 class="body_1 suit_m">
                <img src="~/images/logo_icon.svg" class="logo" alt="logo" />
                <span>Check the result of file upload:</span>
                <span>ERC-20</span>
            </h2>
            <div class="info">
                <div class="body_2 suit_r">
                    Txs to transfer
                    <span>2,500</span> ea
                    /
                    Token to transfer:
                    <span>100,000</span>
                    <span class="unit">MinTi</span>
                    <!-- on추가시 display -->
                    <p class="info_text color_theme on">No problem with the file: Proceed to the next step.</p>
                    <p class="info_text color_alert">Incorrect information exists in 9,999 items.</p>
                </div>
                <div>
                    <button type="button" class="button_112 error">Check errors</button>
                </div>
            </div>
            <div class="table_wrap">
                <table class="table">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Address</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- td 클래스 error 추가시 색상변경 -->
                        <tr>
                            <td class="error">1</td>
                            <td>0x538437e64e851e73edd1bbb2d00526a3c830d31b</td>
                            <td>1,000,000</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td class="error">0x538437e64e851e73edd1bbb2d00526a3c830d31b</td>
                            <td>1,000,000</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>0x538437e64e851e73edd1bbb2d00526a3c830d31b</td>
                            <td>1,000,000</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>0x538437e64e851e73edd1bbb2d00526a3c830d31b</td>
                            <td class="error">1,000,000</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>0x538437e64e851e73edd1bbb2d00526a3c830d31b</td>
                            <td>1,000,000</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="table_nav">
                <!-- a태그 on 추가시 색 변경 -->
                <a href="#" title="first Page"></a>
                <a href="#" title="previous Page"></a>
                <ol>
                    <!-- li 태그 on 추가시 색 변경 -->
                    <li class="on">
                        <a href="#">1</a>
                    </li>
                    <li>
                        <a href="#">2</a>
                    </li>
                    <li>
                        <a href="#">3</a>
                    </li>
                </ol>
                <a href="#" title="next Page" class="on"></a>
                <a href="#" title="last Page" class="on"></a>
            </div>
            <button type="button" class="button_180" data-modal-close>CONFIRM</button>
        </div>
    </div>

    <div class="modal list_modal">
        <div class="inner">
            <h3 class="h3 jost_m color_alert">Incorrect List</h3>
            <p class="sub_title body_2 suit_r">
                Invalid information exists in the items below.<br />
                Double-check your wallet address, total supply, and token ID.
            </p>

            <div class="table_wrap">
                <table class="table">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>99</td>
                            <td>
                                Wallet address
                                not entered
                            </td>
                        </tr>
                        <tr>
                            <td>999</td>
                            <td>
                                Wallet address
                                format missmatiched
                            </td>
                        </tr>
                        <tr>
                            <td>9999</td>
                            <td>
                                Wallet address,
                                Token ID,
                                Total supply
                                not entered
                            </td>
                        </tr>
                        <tr>
                            <td>99999</td>
                            <td>
                                Wallet address,
                                Total supply
                                format missmatiched
                            </td>
                        </tr>
                        <tr>
                            <td>999999</td>
                            <td>
                                Wallet address,
                                Token ID,
                                Total supply
                                not entered
                                Wallet address,
                                Total supply
                                format missmatiched
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <button type="button" class="button_180" data-modal-close>CLOSE</button>
        </div>
    </div>
}
@section Heads{
    <link rel="stylesheet" href="~/css/pages/Airdrop.css" />
}

@section Scripts{

}